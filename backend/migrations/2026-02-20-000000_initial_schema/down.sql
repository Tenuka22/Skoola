-- down.sql for initial_schema

-- Drop indices
DROP INDEX IF EXISTS idx_users_email;
DROP INDEX IF EXISTS idx_user_set_permissions_user_set_id;
DROP INDEX IF EXISTS idx_user_permissions_user_id;
DROP INDEX IF EXISTS idx_user_profiles_user_id;
DROP INDEX IF EXISTS idx_uniform_issues_student_id;
DROP INDEX IF EXISTS idx_uniform_items_item_name;
DROP INDEX IF EXISTS idx_timetable_class_id;
DROP INDEX IF EXISTS idx_subjects_subject_name_en;
DROP INDEX IF EXISTS idx_students_name_english;
DROP INDEX IF EXISTS idx_students_admission_number;
DROP INDEX IF EXISTS idx_streams_name;
DROP INDEX IF EXISTS idx_staff_leaves_status;
DROP INDEX IF EXISTS idx_staff_departments_name;
DROP INDEX IF EXISTS idx_staff_attendance_status;
DROP INDEX IF EXISTS idx_staff_name;
DROP INDEX IF EXISTS idx_staff_employee_id;
DROP INDEX IF EXISTS idx_salary_components_name;
DROP INDEX IF EXISTS idx_role_sets_name;
DROP INDEX IF EXISTS idx_report_cards_student_id;
DROP INDEX IF EXISTS idx_profiles_name;
DROP INDEX IF EXISTS idx_pre_approved_absences_student_id;
DROP INDEX IF EXISTS idx_petty_cash_transactions_type;
DROP INDEX IF EXISTS idx_ol_exams_student_id;
DROP INDEX IF EXISTS idx_maintenance_requests_status;
DROP INDEX IF EXISTS idx_library_books_title;
DROP INDEX IF EXISTS idx_library_categories_name;
DROP INDEX IF EXISTS idx_lesson_progress_class_id;
DROP INDEX IF EXISTS idx_inventory_items_item_name;
DROP INDEX IF EXISTS idx_income_sources_name;
DROP INDEX IF EXISTS idx_grading_schemes_name;
DROP INDEX IF EXISTS idx_grade_levels_grade_number;
DROP INDEX IF EXISTS idx_fee_categories_name;
DROP INDEX IF EXISTS idx_expense_categories_name;
DROP INDEX IF EXISTS idx_exit_passes_student_id;
DROP INDEX IF EXISTS idx_exams_name;
DROP INDEX IF EXISTS idx_emergency_roll_calls_status;
DROP INDEX IF EXISTS idx_cultural_events_event_name;
DROP INDEX IF EXISTS idx_competitions_competition_name;
DROP INDEX IF EXISTS idx_clubs_club_name;
DROP INDEX IF EXISTS idx_classes_grade_id;
DROP INDEX IF EXISTS idx_budgets_academic_year_id;
DROP INDEX IF EXISTS idx_budget_categories_name;
DROP INDEX IF EXISTS idx_attendance_policies_name;
DROP INDEX IF EXISTS idx_attendance_audit_log_changed_by;
DROP INDEX IF EXISTS idx_asset_categories_name;
DROP INDEX IF EXISTS idx_asset_allocations_item_id;
DROP INDEX IF EXISTS idx_al_exams_student_id;
DROP INDEX IF EXISTS idx_activity_attendance_status;
DROP INDEX IF EXISTS idx_activities_name;
DROP INDEX IF EXISTS idx_academic_years_name;

-- Drop Special Tables
DROP TABLE IF EXISTS activity_participants_students;
DROP TABLE IF EXISTS activity_participants_staff;
DROP TABLE IF EXISTS asset_allocations_students;
DROP TABLE IF EXISTS asset_allocations_staff;

-- Drop Level 4 Dependency Tables
DROP TABLE IF EXISTS uniform_issues;
DROP TABLE IF EXISTS substitutions;
DROP TABLE IF EXISTS student_period_attendance;
DROP TABLE IF EXISTS lesson_progress;

-- Drop Level 3 Dependency Tables
DROP TABLE IF EXISTS fee_payments;
DROP TABLE IF EXISTS timetable;
DROP TABLE IF EXISTS teacher_subject_assignments;
DROP TABLE IF EXISTS teacher_class_assignments;
DROP TABLE IF EXISTS class_subject_teachers;
DROP TABLE IF EXISTS student_fees;
DROP TABLE IF EXISTS student_class_assignments;
DROP TABLE IF EXISTS student_attendance;

-- Drop Level 2 Dependency Tables
DROP TABLE IF EXISTS cultural_event_participants;
DROP TABLE IF EXISTS sport_team_members;
DROP TABLE IF EXISTS sport_event_participants;
DROP TABLE IF EXISTS report_card_marks;
DROP TABLE IF EXISTS report_cards;
DROP TABLE IF EXISTS zscore_calculations;
DROP TABLE IF EXISTS student_zscores;
DROP TABLE IF EXISTS student_marks;
DROP TABLE IF EXISTS exam_subjects;
DROP TABLE IF EXISTS library_issues;
DROP TABLE IF EXISTS classes;
DROP TABLE IF EXISTS clubs;
DROP TABLE IF EXISTS petty_cash_transactions;
DROP TABLE IF EXISTS expense_transactions;
DROP TABLE IF EXISTS income_transactions;
DROP TABLE IF EXISTS salary_payments;
DROP TABLE IF EXISTS fee_structures;
DROP TABLE IF EXISTS scholarship_exams;
DROP TABLE IF EXISTS al_exams;
DROP TABLE IF EXISTS ol_exams;
DROP TABLE IF EXISTS exams;
DROP TABLE IF EXISTS emergency_roll_calls;
DROP TABLE IF EXISTS library_books;
DROP TABLE IF EXISTS stream_subjects;
DROP TABLE IF EXISTS grade_subjects;
DROP TABLE IF EXISTS grade_streams;
DROP TABLE IF EXISTS budgets;
DROP TABLE IF EXISTS inventory_items;
DROP TABLE IF EXISTS activities;
DROP TABLE IF EXISTS terms;
DROP TABLE IF EXISTS grading_criteria;
DROP TABLE IF EXISTS attendance_audit_log;
DROP TABLE IF EXISTS role_permissions;
DROP TABLE IF EXISTS role_set_roles;
DROP TABLE IF EXISTS user_set_permissions;
DROP TABLE IF EXISTS user_set_users;
DROP TABLE IF EXISTS user_permissions;
DROP TABLE IF EXISTS user_profiles;
DROP TABLE IF EXISTS students;
DROP TABLE IF EXISTS staff;
DROP TABLE IF EXISTS sessions;
DROP TABLE IF EXISTS maintenance_requests;
DROP TABLE IF EXISTS asset_allocations;
DROP TABLE IF EXISTS activity_participants;
DROP TABLE IF EXISTS activity_attendance;
DROP TABLE IF EXISTS sport_events;
DROP TABLE IF EXISTS sport_teams;
DROP TABLE IF EXISTS pre_approved_absences;
DROP TABLE IF EXISTS exit_passes;
DROP TABLE IF EXISTS detention_balances;
DROP TABLE IF EXISTS student_previous_schools;
DROP TABLE IF EXISTS student_medical_info;
DROP TABLE IF EXISTS student_guardians;
DROP TABLE IF EXISTS student_emergency_contacts;
DROP TABLE IF EXISTS student_achievements;
DROP TABLE IF EXISTS staff_subjects;
DROP TABLE IF EXISTS staff_salaries;
DROP TABLE IF EXISTS staff_qualifications;
DROP TABLE IF EXISTS staff_leaves;
DROP TABLE IF EXISTS staff_employment_history;
DROP TABLE IF EXISTS staff_attendance;

-- Drop Base Tables
DROP TABLE IF EXISTS uniform_items;
DROP TABLE IF EXISTS cultural_events;
DROP TABLE IF EXISTS competitions;
DROP TABLE IF EXISTS seeds;
DROP TABLE IF EXISTS exam_types;
DROP TABLE IF EXISTS school_calendar;
DROP TABLE IF EXISTS school_settings;
DROP TABLE IF EXISTS sports;
DROP TABLE IF EXISTS salary_components;
DROP TABLE IF EXISTS staff_departments;
DROP TABLE IF EXISTS streams;
DROP TABLE IF EXISTS subjects;
DROP TABLE IF EXISTS user_sets;
DROP TABLE IF EXISTS role_sets;
DROP TABLE IF EXISTS library_settings;
DROP TABLE IF EXISTS library_categories;
DROP TABLE IF EXISTS expense_categories;
DROP TABLE IF EXISTS income_sources;
DROP TABLE IF EXISTS grading_schemes;
DROP TABLE IF EXISTS grade_levels;
DROP TABLE IF EXISTS fee_categories;
DROP TABLE IF EXISTS budget_categories;
DROP TABLE IF EXISTS attendance_policies;
DROP TABLE IF EXISTS asset_categories;
DROP TABLE IF EXISTS activity_types;
DROP TABLE IF EXISTS academic_years;
DROP TABLE IF EXISTS profiles;
DROP TABLE IF EXISTS users;
